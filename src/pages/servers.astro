---
import Layout from "../layouts/Layout.astro";
import { ServersDashboardPage } from "../components/servers/ServersDashboardPage";

const initialUsername = Astro.locals.username || null;
const initialProfile = Astro.locals.profile || (initialUsername ? { username: initialUsername } : null);
---

<Layout title="Serwery - Discord Wannabe">
  <main class="min-h-screen bg-background">
    <div class="container mx-auto p-6">
      <ServersDashboardPage client:load initialUsername={initialUsername} initialProfile={initialProfile} />
      <script define:vars={{ initialUsername }}>
        // Store initial username in window for debugging
        if (typeof window !== 'undefined') {
          window.__initialUsername = initialUsername;
        }
      </script>
    </div>
  </main>
</Layout>
